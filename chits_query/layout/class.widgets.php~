<?
  class widgets{
  
    function widgets(){
      $this->appName="CHITS Query Browser";
      $this->appVersion="0.1";
      $this->appAuthor="Alison Perez";
    }
  
    function query_ques(){
      echo "<table border=\"1\">";
      echo "<tr><td colspan=\"2\">CHITS Queries</td></tr>";        
      
      echo "<tr><td rowspan=\"3\" valign=\"top\">A. Registration</td>";
      echo "<td><a href=\"$_SERVER[PHP_SELF]?id=1\">Number of Male and Female per barangay</a></td></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=2\">Age and sex distribution</a></td></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=3\">Top ten causes of morbidity</a></td></tr>";      

      echo "<tr><td rowspan=\"3\" valign=\"top\">B. Family Folder</td>";
      echo "<td><a href=\"$_SERVER[PHP_SELF]?id=4\">Number of families who have consulted</a></td></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=5\">Number of families with PhilHealth</a></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=6\">Number of families with PhilHealth that have been given services</a></td></tr>";      
      
      
      echo "<tr><td rowspan=\"4\" valign=\"top\">C. EPI</td>";
      echo "<td><a href=\"$_SERVER[PHP_SELF]?id=7\">Number of FIC's (including \"OZ's\")</a></td></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=8\">Number of Antigen given</a></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=9\">Number of Antigen not given</a></td></tr>";      
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=10\">Number of Missed EPI appointments</a></td></tr>";      
      
      echo "<tr><td rowspan=\"6\" valign=\"top\">D. Maternal Care</td>";
      echo "<td><a href=\"$_SERVER[PHP_SELF]?id=11\">Pregnant mothers with risk factors</a></td></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=12\">Pregnant mothers under 18 years old</a></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=13\">Mothers given TT, FeSO4, Vit A</a></td></tr>";      
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=14\">Mothers consulting monthly</a></td></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=15\">Mothers candidate for eclampsia</a></td></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=16\">Mother given T1 to T5</a></td></tr>";
      
      echo "<tr><td rowspan=\"4\" valign=\"top\">E. Postpartum</td>";
      echo "<td><a href=\"$_SERVER[PHP_SELF]?id=17\">NSD per location per attendant</a></td></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=18\">Mothers who breastfed her child after birth</a></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=19\">Ferous Sulfate given</a></td></tr>";      
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=20\">Lactating mother given Vit. A</a></td></tr>";
      
      echo "<tr><td rowspan=\"8\" valign=\"top\">F. NTP</td>";
      echo "<td><a href=\"$_SERVER[PHP_SELF]?id=21\">Patient per regimen per barangay</a></td></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=22\">(+) and (-) per classification</a></td></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=23\">Ongoing treatment</a></td></tr>";      
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=24\">Completed treatment per barangay</a></td></tr>";      
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=25\">Defaulters according to regimen.</a></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=26\">Weekly, monthly and quarterly reports</a></td></tr>";      
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=27\">Patients relapsed</a></td></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=28\">Patients by age and distribution</a></td></tr>";
      
      echo "<tr><td rowspan=\"2\" valign=\"top\">G. Nutrition</td>";
      echo "<td><a href=\"$_SERVER[PHP_SELF]?id=29\">Class of weight status according to age and status</a></td></tr>";
      echo "<tr><td><a href=\"$_SERVER[PHP_SELF]?id=30\">Monthly weight</a></td></tr>";
      
      echo "<tr><td valign=\"top\">H. Notifiable Diseases</td>";
      echo "<td><a href=\"$_SERVER[PHP_SELF]?id=31\">Top notifiable diseases</a></td></tr>";
      
      echo "</table>";        
    }  
    
    function query_cat($id){      
      echo "<form action=\"$_SERVER[PHP_SELF]?id=$id\" method=\"POST\" name=\"form_query\">";
      echo "<table border=\"1\">";
      if(empty($id)):
        echo "<tr><td>Please select a query first!</td></tr>";
      else:
        echo "<tr><td colspan=\"2\">$id</td></tr>";
        echo "<tr><td>Start Date (mm/dd/yyyy)</td>";
        echo "<td><input name=\"sdate\" type=\"text\" size=\"12\" maxlength=\"10\"></td></tr>";
        echo "<tr><td>End Date (mm/dd/yyyy)</td>";
        echo "<td><input name=\"edate\" type=\"text\" size=\"12\" maxlength=\"10\"></td></tr>";
        
        echo "<tr><td>Barangay</td>";
        $query_brgy = mysql_query("SELECT barangay_id,barangay_name FROM m_lib_barangay ORDER by barangay_name ASC") or die(mysql_error());
        if(mysql_num_rows($query_brgy)!=0):        
          echo "<td><select name=\"sel_brgy\" size=\"1\">";
          echo "<option value=\"x\">All Barangay</option>";
          while($res_brgy=mysql_fetch_array($query_brgy)){                  
            echo "<option value=\"$res_brgy[barangay_id]\">$res_brgy[barangay_name]</option>";
          }
                  
          echo "</select></td>";
        else:
          echo "<td>No barangays found</td>";
        endif;
        echo "</tr>";
        
        echo "<tr><td>Age group</td>";        
        echo "<td>";
        echo "<select name=\"sel_frage\" size=\"1\">";
        echo "<option value=\"-1\">>1 year old</option>";
          for($i=1;$i<100;$i++){
            echo "<option value=\"$i\">$i year old</option>";
          }        
        echo "</select>";
        
        echo "<b> to </b>";
        
        echo "<select name=\"sel_toage\" size=\"1\">";
        echo "<option value=\"-1\">>1 year old</option>";
          for($j=1;$j<100;$j++){
            if($i==99):
              echo "<option value=\"$j\" SELECTED>$j year old</option>";
            else:
              echo "<option value=\"$j\" SELECTED>$j year old</option>";
            endif;
          }        
        
        echo "</select>";
        echo "</td>";
        echo "</tr>";
        
        echo "<tr>";
        echo "<td>Gender</td>";
        echo "<td><select name=\"sel_gender\" size=\"1\">";
        echo "<option value=\"B\">Any Gender</option>";
        echo "<option value=\"M\">Male</option>";
        echo "<option value=\"F\">Female</option>";
        echo "</td>";              
        echo "</tr>";
        
        echo "<tr align=\"center\">";
        echo "<td colspan=\"2\"><input type=\"submit\" name=\"q_submit\" value=\"Submit\" target=\"new\"></input>&nbsp;&nbsp;&nbsp;";
        echo "<input type=\"reset\" name=\"q_reset\" value=\"Reset\"></input></td>";
        echo "</tr>";
      endif;
      
      echo "</table>";
      
      echo "</option>";
    }    
     
  }
?>